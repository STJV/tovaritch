kind: pipeline
type: docker
name: default

workspace:
  base: /kileed
  path: src

steps:
- name: Setup Workspace
  image: python:3.7
  commands:
  - bash setup-env.sh

- name: Pylint
  image: python:3.7
  commands:
  - ./.env/bin/pylint kileed

- name: API Unit Tests
  image: python:3.7
  commands:
  - ./.env/bin/python manage.py test

- name: Publish
  image: python3.7
  depends_on: [ 'Pylint', 'API Unit Tests' ]